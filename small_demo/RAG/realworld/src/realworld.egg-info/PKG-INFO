Metadata-Version: 2.4
Name: realworld
Version: 1.0.0
Summary: ä¸€ä¸ªå®Œæ•´çš„æ£€ç´¢å¢å¼ºç”Ÿæˆç³»ç»Ÿï¼Œæ”¯æŒå¤šç§åµŒå…¥æ–¹å¼å’Œå‘é‡å­˜å‚¨
Author-email: phoenixrever <phoenixrever@example.com>
Maintainer-email: phoenixrever <phoenixrever@example.com>
License: MIT
Project-URL: Homepage, https://github.com/phoenixrever/generativeAI
Project-URL: Repository, https://github.com/phoenixrever/generativeAI
Project-URL: Issues, https://github.com/phoenixrever/generativeAI/issues
Keywords: RAG,AI,embeddings,vector-search,ollama
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: chromadb>=0.4.0
Requires-Dist: requests>=2.25.0
Requires-Dist: PyPDF2>=3.0.0
Requires-Dist: python-docx>=0.8.0
Requires-Dist: retry>=0.9.0
Provides-Extra: langchain
Requires-Dist: langchain-ollama>=0.1.0; extra == "langchain"
Provides-Extra: gemini
Requires-Dist: google-generativeai>=0.3.0; extra == "gemini"
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: isort>=5.12.0; extra == "dev"
Requires-Dist: flake8>=6.0.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"
Provides-Extra: all
Requires-Dist: realworld[dev,gemini,langchain]; extra == "all"

# ä¼ä¸šçº§ RAG ç³»ç»Ÿ (Enterprise RAG System)

ä¸€ä¸ªå®Œæ•´çš„ä¼ä¸šçº§æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG) ç³»ç»Ÿï¼Œä½¿ç”¨æœ¬åœ° Ollama æœåŠ¡æ„å»ºã€‚æ”¯æŒå¤šç§æ–‡æ¡£æ ¼å¼ã€å‘é‡æœç´¢ã€ç¼“å­˜æœºåˆ¶å’Œå‘½ä»¤è¡Œæ“ä½œã€‚

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

- **å¤šæ ¼å¼æ–‡æ¡£æ”¯æŒ**: TXT, MD, PDF, DOCX
- **æœ¬åœ° LLM é›†æˆ**: ä½¿ç”¨ Ollama æ”¯æŒå¤šç§å¼€æºæ¨¡å‹
- **é«˜æ•ˆå‘é‡æœç´¢**: ChromaDB æä¾›å¿«é€Ÿç›¸ä¼¼åº¦æ£€ç´¢
- **æ™ºèƒ½æ–‡æœ¬åˆ†å‰²**: æ”¯æŒé‡å åˆ†å—å’Œå…ƒæ•°æ®ä¿ç•™
- **ç¼“å­˜æœºåˆ¶**: åµŒå…¥å‘é‡ç¼“å­˜æå‡æ€§èƒ½
- **å‘½ä»¤è¡Œå·¥å…·**: å®Œæ•´çš„ CLI æ¥å£
- **é…ç½®ç®¡ç†**: çµæ´»çš„é…ç½®ç³»ç»Ÿ
- **æ—¥å¿—è®°å½•**: ç»“æ„åŒ–æ—¥å¿—å’Œé”™è¯¯å¤„ç†
- **å•å…ƒæµ‹è¯•**: å®Œæ•´çš„æµ‹è¯•è¦†ç›–

## ğŸ“ é¡¹ç›®ç»“æ„

```
realworld/
â”œâ”€â”€ src/                    # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ rag_engine.py      # RAG å¼•æ“æ ¸å¿ƒ
â”‚   â”œâ”€â”€ embedders.py       # åµŒå…¥å™¨æ¥å£å’Œå®ç°
â”‚   â”œâ”€â”€ vector_store.py    # å‘é‡å­˜å‚¨ç®¡ç†
â”‚   â”œâ”€â”€ document_processor.py  # æ–‡æ¡£å¤„ç†
â”‚   â”œâ”€â”€ config.py          # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ logger.py          # æ—¥å¿—é…ç½®
â”œâ”€â”€ cli/                   # å‘½ä»¤è¡Œæ¥å£
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ cli.py            # CLI å®ç°
â”‚   â””â”€â”€ main.py           # ä¸»å…¥å£
â”œâ”€â”€ data/                  # æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ documents/        # ç¤ºä¾‹æ–‡æ¡£
â”‚   â””â”€â”€ db/               # å‘é‡æ•°æ®åº“
â”œâ”€â”€ examples/             # ç¤ºä¾‹è„šæœ¬
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ demo_embedders.py         # åµŒå…¥å™¨æ¼”ç¤º
â”‚   â”œâ”€â”€ demo_embedding_modes.py   # åµŒå…¥æ¨¡å¼æ¼”ç¤º
â”‚   â””â”€â”€ gemini_example.py         # Gemini ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ docs/                 # æ–‡æ¡£
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ README.md         # é¡¹ç›®æ–‡æ¡£
â”‚   â””â”€â”€ configç›¸å…³è§£è¯».md  # é…ç½®è¯´æ˜
â”œâ”€â”€ tests/                # æµ‹è¯•
â”‚   â””â”€â”€ test_rag.py       # å•å…ƒæµ‹è¯•
â”œâ”€â”€ config.json           # é…ç½®æ–‡ä»¶
â”œâ”€â”€ logs/                 # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ cache/                # ç¼“å­˜æ–‡ä»¶
â”œâ”€â”€ pyproject.toml        # é¡¹ç›®é…ç½®å’Œä¾èµ–ç®¡ç† (PEP 621)
â”œâ”€â”€ requirements.txt      # ä¼ ç»Ÿä¾èµ–æ–‡ä»¶ (å‘åå…¼å®¹)
â””â”€â”€ __init__.py          # åŒ…åˆå§‹åŒ–
```

## ğŸ§  åµŒå…¥å™¨æ¶æ„

æœ¬é¡¹ç›®å®ç°äº†çµæ´»çš„åµŒå…¥å™¨æ¶æ„ï¼Œæ”¯æŒå¤šç§åµŒå…¥ç”Ÿæˆæ–¹å¼ï¼Œä¾¿äºåœ¨ä¸åŒåœºæ™¯ä¸‹åˆ‡æ¢å’Œæ‰©å±•ã€‚

### æ ¸å¿ƒç»„ä»¶

1. **`Embedder` æŠ½è±¡åŸºç±»** (`embedders.py`)

   - å®šä¹‰ç»Ÿä¸€çš„åµŒå…¥å™¨æ¥å£
   - åŒ…å« `generate_embedding()` å’Œ `generate_embeddings()` æ–¹æ³•

2. **å…·ä½“å®ç°ç±»**
   - `OllamaDirectEmbedder`: ç›´æ¥è°ƒç”¨ Ollama API
   - `OllamaLangchainEmbedder`: ä½¿ç”¨ LangChain OllamaEmbeddings
   - `OnlineModelEmbedder`: çº¿ä¸Šå¤§æ¨¡å‹ (å¾…å®ç°)

### åµŒå…¥å™¨å¯¹æ¯”

| åµŒå…¥å™¨ç±»å‹         | ä¼˜ç‚¹                         | ç¼ºç‚¹                              | é€‚ç”¨åœºæ™¯             |
| ------------------ | ---------------------------- | --------------------------------- | -------------------- |
| `ollama_direct`    | è½»é‡ã€æ— ä¾èµ–ã€ç›´æ¥æ§åˆ¶       | éœ€è¦æ‰‹åŠ¨å¤„ç†é”™è¯¯é‡è¯•              | æœ¬åœ°éƒ¨ç½²ã€ç®€å•åœºæ™¯   |
| `ollama_langchain` | æ‰¹é‡å¤„ç†é«˜æ•ˆã€åŠŸèƒ½ä¸°å¯Œ       | éœ€è¦é¢å¤–ä¾èµ–                      | é«˜æ€§èƒ½éœ€æ±‚ã€å¤æ‚åº”ç”¨ |
| `online`           | äº‘ç«¯æœåŠ¡ã€æ˜“æ‰©å±•ã€é«˜è´¨é‡åµŒå…¥ | ç½‘ç»œä¾èµ–ã€API è´¹ç”¨ã€éœ€è¦ API å¯†é’¥ | äº‘ç«¯éƒ¨ç½²ã€å•†ä¸šåº”ç”¨   |

### ä½¿ç”¨æ–¹æ³•

```python
from rag_engine import RAGEngine

# ä½¿ç”¨ç›´æ¥åµŒå…¥å™¨ (é»˜è®¤)
engine = RAGEngine(embedder_type="ollama_direct")

# ä½¿ç”¨ LangChain åµŒå…¥å™¨ (æ¨è)
engine = RAGEngine(embedder_type="ollama_langchain")

# ä½¿ç”¨ Gemini åµŒå…¥å™¨
engine = RAGEngine(
    embedder_type="online",
    embedder_kwargs={"api_key": "your_gemini_api_key"}
)
```

### æ‰©å±•æ–°åµŒå…¥å™¨

è¦æ·»åŠ æ–°çš„åµŒå…¥å™¨å®ç°ï¼š

1. ç»§æ‰¿ `Embedder` æŠ½è±¡åŸºç±»
2. å®ç° `generate_embedding()` å’Œ `generate_embeddings()` æ–¹æ³•
3. å®ç° `check_health()` æ–¹æ³•
4. åœ¨ `create_embedder()` å‡½æ•°ä¸­æ·»åŠ æ–°çš„ç±»å‹å¤„ç†

## ï¿½ ä¾èµ–ç®¡ç†

æœ¬é¡¹ç›®ä½¿ç”¨ç°ä»£çš„ `pyproject.toml` (PEP 621) è¿›è¡Œä¾èµ–ç®¡ç†å’Œé¡¹ç›®é…ç½®ï¼ŒåŒæ—¶ä¿ç•™ `requirements.txt` ä»¥ç¡®ä¿å‘åå…¼å®¹ã€‚

### ä¸»è¦ä¾èµ–

- **chromadb**: å‘é‡æ•°æ®åº“ï¼Œç”¨äºæ–‡æ¡£åµŒå…¥å­˜å‚¨å’Œç›¸ä¼¼åº¦æœç´¢
- **requests**: HTTP å®¢æˆ·ç«¯ï¼Œç”¨äºä¸ Ollama API é€šä¿¡
- **PyPDF2**: PDF æ–‡æ¡£å¤„ç†
- **python-docx**: Word æ–‡æ¡£å¤„ç†
- **retry**: ç½‘ç»œè¯·æ±‚é‡è¯•æœºåˆ¶

### å¯é€‰ä¾èµ–

- **langchain-ollama**: LangChain Ollama é›†æˆ (å®‰è£… `pip install -e .[langchain]`)
- **google-generativeai**: Google Gemini API é›†æˆ (å®‰è£… `pip install -e .[gemini]`)

## ï¿½ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- Python 3.8+
- Ollama (å·²å®‰è£…å¹¶è¿è¡Œ)
- ç£ç›˜ç©ºé—´: è‡³å°‘ 2GB (ç”¨äºæ¨¡å‹å’Œå‘é‡å­˜å‚¨)

## ğŸ› ï¸ å®‰è£…æ­¥éª¤

### 1. å®‰è£… Ollama

```bash
# ä¸‹è½½å¹¶å®‰è£… Ollama
curl -fsSL https://ollama.ai/install.sh | sh

# å¯åŠ¨ Ollama æœåŠ¡
ollama serve
```

### 2. å®‰è£… Python ä¾èµ–

```bash
# åŸºç¡€ä¾èµ– (æ¨èå¼€å‘æ¨¡å¼å®‰è£…)
pip install -e .

# æˆ–è€…ç›´æ¥å®‰è£…
pip install .

# å¯é€‰ï¼šå®‰è£… LangChain åµŒå…¥å™¨æ”¯æŒ
pip install -e ".[langchain]"

# å¯é€‰ï¼šå®‰è£… Gemini åµŒå…¥å™¨æ”¯æŒ
pip install -e ".[gemini]"

# å¯é€‰ï¼šå®‰è£…æ‰€æœ‰å¯é€‰ä¾èµ–
pip install -e ".[all]"

# å¼€å‘ç¯å¢ƒ (åŒ…å«æµ‹è¯•å’Œä»£ç æ ¼å¼åŒ–å·¥å…·)
pip install -e ".[dev]"
```

### 3. ä¸‹è½½æ¨¡å‹

```bash
# åµŒå…¥æ¨¡å‹ (æ¨è)
ollama pull bge-m3

# ç”Ÿæˆæ¨¡å‹ (æ ¹æ®éœ€è¦é€‰æ‹©)
ollama pull qwen2.5:7b      # é€šä¹‰åƒé—® (æ¨è)
ollama pull qwen2.5:14b     # é€šä¹‰åƒé—®æ›´å¤§æ¨¡å‹
ollama pull qwen2.5:32b     # é€šä¹‰åƒé—®æœ€å¤§æ¨¡å‹
```

## âš™ï¸ é…ç½®

ç³»ç»Ÿæ”¯æŒå¤šç§é…ç½®æ–¹å¼ï¼š

### ç¯å¢ƒå˜é‡é…ç½®

```bash
export OLLAMA_BASE_URL="http://localhost:11434"
export OLLAMA_EMBEDDING_MODEL="bge-m3"
export OLLAMA_GENERATION_MODEL="qwen2.5:7b"
export LOG_LEVEL="INFO"
```

### é…ç½®æ–‡ä»¶

åˆ›å»º `config.json`:

```json
{
  "ollama": {
    "base_url": "http://localhost:11434",
    "embedding_model": "bge-m3",
    "generation_model": "qwen2.5:7b"
  },
  "vector_store": {
    "persist_directory": "./db/chroma",
    "collection_name": "documents"
  },
  "logging": {
    "level": "INFO",
    "file_path": "logs/rag_app.log"
  }
}
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### å‘½ä»¤è¡Œå·¥å…·

```bash
# æŸ¥çœ‹å¸®åŠ©
python cli.py --help

# æ·»åŠ æ–‡æ¡£
python cli.py add /path/to/documents --recursive

# æŸ¥è¯¢é—®é¢˜
python cli.py query "ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ï¼Ÿ" --n-results 3

# æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
python cli.py stats

# æ¸…ç©ºçŸ¥è¯†åº“
python cli.py clear --yes
```

### Python API

```python
from rag_engine import create_rag_engine

# åˆ›å»ºå¼•æ“
engine = create_rag_engine()

# æ·»åŠ æ–‡æ¡£
engine.add_documents(["./documents"])

# æ‰§è¡ŒæŸ¥è¯¢
result = engine.query("ä½ çš„é—®é¢˜")
print(result["answer"])
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
realworld/
â”œâ”€â”€ config.py              # é…ç½®ç®¡ç†
â”œâ”€â”€ logger.py              # æ—¥å¿—ç³»ç»Ÿ
â”œâ”€â”€ document_processor.py  # æ–‡æ¡£å¤„ç†
â”œâ”€â”€ vector_store.py        # å‘é‡å­˜å‚¨
â”œâ”€â”€ rag_engine.py          # RAG å¼•æ“æ ¸å¿ƒ
â”œâ”€â”€ cli.py                 # å‘½ä»¤è¡Œæ¥å£
â”œâ”€â”€ main.py                # ä¸»å…¥å£
â”œâ”€â”€ requirements.txt       # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ README.md             # æ–‡æ¡£
â””â”€â”€ tests/
    â””â”€â”€ test_rag.py       # å•å…ƒæµ‹è¯•
```

## ğŸ”§ é«˜çº§é…ç½®

### æ–‡æ¡£å¤„ç†é…ç½®

```python
# åœ¨ config.json ä¸­è‡ªå®šä¹‰
{
  "document": {
    "chunk_size": 1000,
    "chunk_overlap": 200,
    "supported_extensions": [".txt", ".md", ".pdf", ".docx"]
  }
}
```

### å‘é‡æœç´¢é…ç½®

```python
{
  "vector_store": {
    "similarity_threshold": 0.7,
    "max_results": 5
  }
}
```

### ç¼“å­˜é…ç½®

```python
{
  "cache": {
    "enabled": true,
    "directory": "./cache",
    "ttl": 3600
  }
}
```

## ğŸ§ª æµ‹è¯•

è¿è¡Œå•å…ƒæµ‹è¯•ï¼š

```bash
python -m pytest tests/ -v
```

æˆ–ç›´æ¥è¿è¡Œï¼š

```bash
python tests/test_rag.py
```

è¿è¡ŒåµŒå…¥å™¨æ¼”ç¤ºï¼š

```bash
python demo_embedders.py
```

è¿è¡Œ Gemini åµŒå…¥å™¨ç¤ºä¾‹ï¼š

```bash
# è®¾ç½® API key
export GEMINI_API_KEY='your_api_key_here'

# è¿è¡Œç¤ºä¾‹
python gemini_example.py
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

1. **æ¨¡å‹é€‰æ‹©**: ä½¿ç”¨æ›´å°çš„æ¨¡å‹ä»¥æé«˜å“åº”é€Ÿåº¦
2. **ç¼“å­˜**: å¯ç”¨åµŒå…¥ç¼“å­˜ä»¥é¿å…é‡å¤è®¡ç®—
3. **æ‰¹å¤„ç†**: å¤§é‡æ–‡æ¡£æ—¶ä½¿ç”¨æ‰¹å¤„ç†æ·»åŠ 
4. **ç´¢å¼•ä¼˜åŒ–**: å®šæœŸæ¸…ç†æ— ç”¨æ–‡æ¡£

## ğŸ” æ•…éšœæ’é™¤

### Ollama è¿æ¥é—®é¢˜

```bash
# æ£€æŸ¥ Ollama çŠ¶æ€
curl http://localhost:11434/api/tags

# é‡å¯ Ollama
ollama serve
```

### å†…å­˜ä¸è¶³

- ä½¿ç”¨æ›´å°çš„æ¨¡å‹
- å‡å°‘ `chunk_size`
- å¯ç”¨ç¼“å­˜æ¸…ç†

### æ–‡æ¡£å¤„ç†å¤±è´¥

- æ£€æŸ¥æ–‡ä»¶ç¼–ç  (æ¨è UTF-8)
- éªŒè¯æ–‡ä»¶æ ¼å¼æ”¯æŒ
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶è·å–è¯¦ç»†é”™è¯¯

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶æˆ–æäº¤ Issueã€‚
